<!doctype html>
<html>
<head>
  <title>HUGE NavExercise</title>
  <link rel="stylesheet" href="/styles/main.css">

</head>
<body>
  <!-- Header :: nav -->
  <header id="header">
    <huge-nav id="main-nav">
      <div id="nav-controls">
        <h1 class="brand-container">
          <a rel="home" href="#" title="HUGE">
            <span id="navbar-brand"></span>
          </a>
        </h1>
        <button id="menu-button" onclick="toggleMenu(event)"></button>
      </div>
      <nav id="inner-nav">
        <ul>
        	<li><a href="#/work">Work </a></li>
        	<li>
        		<a href="#/about">About </a>
        		<ul>
        			<li><a href="#/about/what-we-do">What we do </a></li>
        			<li><a href="#/about/how-we-work">How we work </a></li>
        			<li><a href="#/about/leadership">Leadership </a></li>
        		</ul>
        	</li>
        	<li>
        		<a href="#/careers">Careers </a>
        		<ul>
        			<li><a href="#/careers/client-services">Client Services </a></li>
        			<li><a href="#/careers/creative">Creative </a></li>
        			<li><a href="#/careers/motion-and-media">Motion &amp; Media </a></li>
        			<li><a href="#/careers/operations">Operations </a></li>
        			<li><a href="#/careers/people">People </a></li>
        			<li><a href="#/careers/strategy">Strategy </a></li>
        			<li><a href="#/careers/technology">Technology </a></li>
        			<li><a href="#/careers/ux-and-product-design">UX &amp; Product Design </a></li>
        		</ul>
        	</li>
        	<li>
        		<a href="#/ideas">Ideas </a>
        		<ul>
        			<li><a href="#/ideas/reports">Reports </a></li>
        			<li><a href="#/ideas/perspectives">Perspectives </a></li>
        			<li><a href="#/ideas/books">Books </a></li>
        			<li><a href="#/ideas/videos">Videos </a></li>
        		</ul>
        	</li>
        	<li><a href="#/news">News </a></li>
        	<li><a href="#/events">Events </a></li>
        	<li>
        		<a href="#/contact">Contact </a>
        		<ul>
        			<li><a href="#/contact/atlanta">Atlanta </a></li>
        			<li><a href="#/contact/brooklyn">Brooklyn </a></li>
        			<li><a href="#/contact/dc">DC </a></li>
        			<li><a href="#/contact/london">London </a></li>
        			<li><a href="#/contact/los-angeles">Los Angeles </a></li>
        			<li><a href="#/contact/portland">Portland </a></li>
        			<li><a href="#/contact/rio">Rio </a></li>
        			<li><a href="#/contact/san-francisco">San Francisco </a></li>
        		</ul>
        	</li>
        </ul>
        <span class="copyright">&#169 2014 Huge. All Rights Reserved.</span>
      </nav>
    </huge-nav>
  </header>
  <!-- Main -->
	<main>
    <!-- Banner and headline -->
  	<section class="banner">
  		<h2 class="headline">Get paid for having fun.</h2>
  	</section>
    <div class="headline-wrapper">
      <h2 class="headline-mobile">Get paid for having fun.</h2>
    </div>
    <!-- Content -->
  	<section class="content" >
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
    </section>
	</main>
</body>
<script type="text/javascript">
const showMenu = function(event){
  event.stopPropagation();
  const shown = this.parentElement.classList.contains('selected-node');
  hideMenu(null);
  if(!shown){
    const ulTags = this.parentElement.getElementsByTagName('ul');
    if (ulTags.length > 0) {
      showMask();
      this.parentElement.classList.add('selected-node');
    }
  }
}
const hideMenu = function(event){
  if (!event || event.target.tagName != 'A') {
    hideMask();
    const nodes = document.querySelectorAll('huge-nav nav > ul > li.selected-node');
    for (let i = 0; i < nodes.length; i++) {
      nodes[i].classList.remove('selected-node');
    }
  }
}

function showMask(){
  let blockMask = document.getElementById('block-mask');
  if (!blockMask) {
    blockMask = document.createElement('div');
    blockMask.id = 'block-mask';
    blockMask.addEventListener('click', hideMenu);
    document.getElementById('main-nav').appendChild(blockMask);
  }
  blockMask.style.display = 'block';
}

//Hides mask
function hideMask(){
  let mainNav = document.getElementById('inner-nav');
  if (!mainNav.classList.contains('menu-open')) {
    let blockMask = document.getElementById('block-mask');
    if (blockMask) {
      blockMask.style.display = 'none';
    }
  }
}

function toggleMenu(event) {
  event.stopPropagation();

  let menuButton = document.getElementById('menu-button');
  menuButton.classList.toggle('menu-open');
  let navbarBrand = document.getElementById('navbar-brand');
  navbarBrand.classList.toggle('menu-open');
  let mainNav = document.getElementById('inner-nav');
  mainNav.classList.toggle('menu-open');
  if (mainNav.classList.contains('menu-open')) {
    showMask();
  }else{
    hideMask();
  }
}

const flNodes = document.querySelectorAll('huge-nav nav > ul > li');
for (let i = 0; i < flNodes.length; i++) {
  flNodes[i].querySelector('a:first-of-type').addEventListener('click', showMenu);
}

const mainNav = document.getElementById('main-nav');
mainNav.addEventListener('click', hideMenu);


</script>
</html>
